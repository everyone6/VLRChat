{% extends "base.html" %}
{% block content %}
{{ super() }}

<!-- Add XLR link and replace home icon with book -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Find the site title element
    var siteName = document.querySelector('.wy-side-nav-search a.icon');
    if (siteName) {
        // Create XLR link
        var xlrLink = document.createElement('a');
        xlrLink.href = 'https://xlr.chat';
        xlrLink.textContent = 'XLR';
        xlrLink.style.cssText = 'color: #CFAE70; text-decoration: none; font-weight: bold; margin-right: 12px; font-size: 1.2em;';
        
        // Insert before the home icon
        siteName.parentNode.insertBefore(xlrLink, siteName);
        
        // Replace home icon with book icon
        var homeIcon = siteName.querySelector('i');
        if (homeIcon) {
            homeIcon.className = 'fa fa-book';
            homeIcon.style.color = '#CFAE70';
        }
        
        // Style the site name
        var siteNameText = siteName.childNodes[siteName.childNodes.length - 1];
        if (siteNameText && siteNameText.nodeType === 3) {
            var span = document.createElement('span');
            span.textContent = siteNameText.textContent;
            span.style.marginLeft = '8px';
            siteNameText.replaceWith(span);
        }
    }
});
</script>

<script type="module">
import Chatbot from "https://cdn.jsdelivr.net/npm/flowise-embed/dist/web.js"
Chatbot.init({
    chatflowid: "a542b9c1-03cf-409a-bcdc-295aa6c7eb09",
    apiHost: "https://api.vlr.chat",
    theme: {
        button: {
            backgroundColor: '#866D4B',
            right: 20,
            bottom: 20,
            size: 48,
            dragAndDrop: true,
            iconColor: 'white',
        },
        chatWindow: {
            showTitle: true,
            title: 'VLRChat',
            titleBackgroundColor: '#866D4B',
            welcomeMessage: 'Welcome to VLRChat.',
            errorMessage: 'Sorry, something went wrong. Please try again.',
            backgroundColor: '#ffffff',
            height: 700,
            width: 400,
            fontSize: 16,
            clearChatOnReload: false,
            showSourceDocuments: false,
            sourceDocsTitle: 'Sources:',
            renderHTML: true,
            botMessage: {
                backgroundColor: '#F5F5F5',
                textColor: '#000000',
                showAvatar: false,
            },
            userMessage: {
                backgroundColor: '#866D4B',
                textColor: '#ffffff',
                showAvatar: false,
            },
            textInput: {
                placeholder: 'Type your question',
                backgroundColor: '#ffffff',
                textColor: '#000000',
                sendButtonColor: '#866D4B',
                autoFocus: true,
            },
            feedback: {
                color: '#866D4B',
            },
            footer: {
                textColor: '#866D4B',
                text: 'Powered by',
                company: 'Flowise',
                companyLink: 'https://flowiseai.com'
            }
        }
    },
    customCSS: `a.MuiChip-root { display: none !important; }`,
})
</script>
{% endblock %}
