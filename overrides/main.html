{% extends "base.html" %}
{% block content %}
{{ super() }}

<!-- Add XLR link with pipe separator -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Find the site title link
    var siteTitleLink = document.querySelector('.wy-side-nav-search > a');
    if (siteTitleLink) {
        // Store original content
        var homeIcon = siteTitleLink.querySelector('i.fa-home');
        
        // Clear and rebuild with proper styling
        siteTitleLink.innerHTML = '';
        siteTitleLink.style.display = 'flex';
        siteTitleLink.style.alignItems = 'center';
        siteTitleLink.style.color = '#ffffff';
        
        // Add home icon
        if (homeIcon) {
            homeIcon.style.cssText = 'color: #ffffff; margin-right: 10px;';
            siteTitleLink.appendChild(homeIcon);
        } else {
            // Fallback if icon not found
            var iconSpan = document.createElement('i');
            iconSpan.className = 'fa fa-home';
            iconSpan.style.cssText = 'color: #ffffff; margin-right: 10px;';
            siteTitleLink.appendChild(iconSpan);
        }
        
        // Create XLR link
        var xlrLink = document.createElement('a');
        xlrLink.href = 'https://xlr.chat';
        xlrLink.textContent = 'XLR';
        xlrLink.style.cssText = 'color: #CFAE70; text-decoration: none; font-weight: bold; font-size: 1em; margin-right: 10px;';
        xlrLink.onclick = function(e) {
            e.stopPropagation();
        };
        
        // Create pipe separator
        var separator = document.createElement('span');
        separator.textContent = '|';
        separator.style.cssText = 'color: #ffffff; margin-right: 10px; font-weight: normal;';
        
        // Create VLRChat text
        var siteNameSpan = document.createElement('span');
        siteNameSpan.textContent = 'VLRChat';
        siteNameSpan.style.cssText = 'color: #ffffff; font-weight: bold;';
        
        // Assemble
        siteTitleLink.appendChild(xlrLink);
        siteTitleLink.appendChild(separator);
        siteTitleLink.appendChild(siteNameSpan);
    }
});
</script>

<script type="module">
import Chatbot from "https://cdn.jsdelivr.net/npm/flowise-embed/dist/web.js"
Chatbot.init({
    chatflowid: "a542b9c1-03cf-409a-bcdc-295aa6c7eb09",
    apiHost: "https://api.vlr.chat",
    theme: {
        button: {
            backgroundColor: '#866D4B',
            right: 20,
            bottom: 20,
            size: 48,
            dragAndDrop: true,
            iconColor: 'white',
        },
        chatWindow: {
            showTitle: true,
            title: 'VLRChat',
            titleBackgroundColor: '#866D4B',
            welcomeMessage: 'Welcome to VLRChat.',
            errorMessage: 'Sorry, something went wrong. Please try again.',
            backgroundColor: '#ffffff',
            height: 700,
            width: 400,
            fontSize: 16,
            clearChatOnReload: false,
            showSourceDocuments: false,
            sourceDocsTitle: 'Sources:',
            renderHTML: true,
            botMessage: {
                backgroundColor: '#F5F5F5',
                textColor: '#000000',
                showAvatar: false,
            },
            userMessage: {
                backgroundColor: '#866D4B',
                textColor: '#ffffff',
                showAvatar: false,
            },
            textInput: {
                placeholder: 'Type your question',
                backgroundColor: '#ffffff',
                textColor: '#000000',
                sendButtonColor: '#866D4B',
                autoFocus: true,
            },
            feedback: {
                color: '#866D4B',
            },
            footer: {
                textColor: '#866D4B',
                text: 'Powered by',
                company: 'Flowise',
                companyLink: 'https://flowiseai.com'
            }
        }
    },
    customCSS: `a.MuiChip-root { display: none !important; }`,
})
</script>
{% endblock %}
